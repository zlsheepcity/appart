<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>gene ball</title>
    <script>
        const log = (...msg) => console.log(...msg)
        const msg = msg => console.log('..', msg)
        const tab = msg => console.table({...msg})
    </script>
</head>
<body>
    <pre>
        ABPT
        RGFH
    </pre>
    <script>

        /**/ // ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ Noble

        const NobleGenetics = function NobleGeneticsFactory
        (...dna) {
            const Noble = Object.assign(this, ...dna)
            Noble.profile = f => log({NobleGenetics:'·',...Noble})

            Noble.WorldSettings = {
                SEED: 'RGFHIAEO',
                PACE:  4,//4
                }
            const GEN = Object.assign(this, Noble.WorldSettings)

            let mCharEater = Char => Eater => {
                const r = [...Char]
                const g = list => list.reduce(f,0)
                const f = (counter, G) => counter + h(G)
                const h = Eater
                return g(r);
                }

            Noble.Nuke = base => {
                const  r = [...GEN.SEED];
                const  g = x => x.reduce(f, {});
                const  f = (a,b) => (a[b]=h(b),a);
                const  h = x => [];
                return g(r)
                }

            Noble.Gene = base => {
                const  r = GEN.SEED.substr(0, GEN.PACE);
                const  g = x => h[0]+f(x)+f(x)+f(x);
                const  f = x => x[Math.floor( Math.random()*x.length )];
                const  h = base || f(r);
                return g(h+r);
                }

            Noble.NukeCharSize = oO => {
                let { nuke, char } = oO || {}
                let ObjectNukeSizer = G =>
                    Object.keys(nuke).reduce(
                        (power, g) => power +
                        (nuke[g]
                            .join('')
                            .match(new RegExp(G,"g"))
                            || []
                        ).length
                        ,0);
                return mCharEater(char)(ObjectNukeSizer);
            };

        };

        const GEN = new NobleGenetics({msg})
        GEN.profile()
        log(GEN.Gene())

        const NobleSheep = function NobleSheepFactory
        (...genes) {
            const Noble = Object.assign(this, ...genes)
            Noble.Profile = f => log({NobleSheep:'·',...Noble})
            Noble.Display = f => {
                console.group(['NobleSheep',Noble.name || ''].join(': '))
                Noble.Profile()
                for (i in Noble.nuke) log(i, Noble.nuke[i])
                console.groupEnd()
                }
            Noble.nuke = genes.nuke || GEN.Nuke()

            Noble.NukeFill = (dna, base) => {
                const  r = Object.keys(dna.nuke).slice(0, GEN.PACE);
                const  g = x => x.reduce(f, {})
                const  f = (a,b) => (a[b]=h(b),a);
                const  h = G => [GEN.Gene(G)];
                dna.nuke = {...dna.nuke, ...g(r)}
                //dna.nuke = Object.keys(dna.nuke).map(G=>GEN.Gene(G))
                }

            Noble.GenePower = G => {
                const NUKE = Noble.nuke
                const GPower = g =>
                    Object.keys(NUKE).reduce(
                        (power, key) => power +
                        (NUKE[key]
                            .join('')
                            .match(new RegExp(g,"g"))
                            || []
                        ).length
                        ,0);
                return [...G].reduce( (p,g) => p+GPower(g) , 0)
            };

            // run
            Noble.NukeFill(Noble)
        };

        /**/ // ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ Run

        const Sheep = new NobleSheep({msg})
//        Sheep.msg('Hi')
//        Sheep.display()
//        log('Gene power R:', Sheep.GenePower('R'))

        const Team = [
            new NobleSheep({name:'Player Geta'}),
            new NobleSheep({name:'Player Hita'}),
        ];
        Team[0].Display()
        Team[1].Display()
        msg(
            ( x => G => l =>
            [ Team[x].name, l, Team[x].GenePower(G) ].join(' ')
            )(1)('HF')('hit')
        );
        msg(
            ( x => G => l =>
            [ Team[x].name, l, Team[x].GenePower(G) ].join(' ')
            )(0)('GR')('get')
        );

        log( GEN.NukeCharSize({...Team[1], char:'FH'}) );
        log( GEN.NukeCharSize({...Team[0], char:'GR'}) );

        /**/ // ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ End

        const GeneFactory = function() {
            let DNA  = this
            DNA.SEED ='RGFHIAEO'
            DNA.BASE ='RGFH'
            DNA.GeneSeed = base => {
                const  r = DNA.BASE;
                const  g = x => x[0]+f(x)+f(x)+f(x);
                const  f = x => x[Math.floor( Math.random()*x.length )];
                const  h = base ||f(r);
                return g(h+r);
            };
        }
        const GeneFactoryTest = function(GeneFactory) {
            let X = new GeneFactory()
            let GeneSeedF1 = r => Array.from('123456789012').map(x=>X.GeneSeed(r))
            log('GeneSeed R/G/F/H');
            log(GeneSeedF1('R'))
            log(GeneSeedF1('G'))
            log(GeneSeedF1('F'))
            log(GeneSeedF1('H'))
        }
        const SheepFactory = function() {
            let DNA  = this
            DNA.code = {r:[],g:[],f:[],h:[]}
            DNA.FillCode = (code) => {
                let i = 'r'
                const isFreeBase = !code[i].length
                const lastGene = code[i][code[i].length-1]
                const inviteChar = isFreeBase ? i : lastGene[3]
            }
            
        };
/*
RGFH
MBPT
IAE

sheep
ship
    nuke
        rgfh
        e:  exp, game played
        a:  atf, focus points
        i:  ini, initiative
        o:  empty
    pool
        

        s:  svg
            mods:
                r*r*:

        const GeneFactory = function() {
            let DNA  = this
            DNA.SEED ='RGFH'
            DNA.BornGene = base => {
                const  f = x => Math.floor( Math.random()*x.length )
                const  g = x =>(base||x[f(x)])+x[f(x)]+x[f(x)]+x[f(x)]
                return g(DNA.SEED)
            }
            DNA.GeneCreate = base => {
                const  f = x => x[Math.floor( Math.random()*x.length )]
                const  g = x => x[0]+f(x)+f(x)+f(x)
                let seed = DNA.SEED
                let head = base || f(seed)
                return g(head+seed)
            }
            DNA.GrowGene = blob => {
                const { gene, next } = blob
            }
            DNA.JoinPair = pair => {
                // const { a, b, }
            }
        };
*/


        const lib = {
            GeneEvents: {
                R: [
                    {
                        name:'RR Double Run',
                        rule: G => G[3] === 'R',
                    },
                    {
                        name:'RH Hit & Run',
                        rule: G => G[3] === 'H',
                    },
                ],
            },
        };
        const GeneEvents = {
            R:Gene => {
                let R = lib.GeneEvents.R
                let G = Gene // mix
                let F = GeneEvent => GeneEvent.rule
                let H = GeneEvent => log(GeneEvent.name)
                let action = R => F(R)(G) && H(R)
                R.map(action)
            }
        }
//        GeneEvents.R('RRGHH0')
//        let X = new GeneFactory()
//
//        console.log('X Gene', X.GeneSeed('X'))
//        console.log('D Gene', X.GeneSeed())
//
//        const sheep = {
//            AR:[X.GeneSeed('R')],
//            BG:[X.GeneSeed('G')],
//            PF:[X.GeneSeed('F')],
//            TH:[X.GeneSeed('H')]
//        }
//        tab(sheep)
//        GeneFactoryTest(GeneFactory);

    </script>
    <!-- 
    <script>
        let org = {
            M: []
          , B: []
          , P: []
          , T: []
        }
        GameActions = {
            R: G => {
                // G[0]
                // G[3]
                // G[2]
                if (G[3]==='R') console.log('RR Double Run')
            }
        }
        GameAction['R']
        let org = {
            R: [ 'RGFH' , 'HGFH' ],
            G: [ 'GGFH' ],
            F: [ 'FGFH' ],
            H: [ 'HGFH' ],
        }
        let org = [
            ['MRRR', 'RGFH']
          , ['BGGG', 'GGFH']
          , ['PFFF', 'FGFH']
          , ['THHH', 'HGFH']
        ]
        const A = {
            DNA : 'MBPT'
          , MAP : 'RGFH'
        }
        const MBPT = 'MBPT';
        const RGFH = 'RGFH';
        let gene = 'RGFH';
        let root = MBPT[RGFH.indexOf(gene[0])];
        let next = 'HGFH'

        const godmode = {
            g: i => gene[i]
          , G: gene
        }
        let { g } = godmode;
        
        let root = MBPT[RGFH.indexOf(G[1])];

        /**/gene = 'RGFH'
        let pair = {
            init : gene[0] + gene[1]
          , acid : gene[2] + gene[3]
          , exit : gene[4] + gene[5]
        }
        let set1 = [ 'init', 'acid', 'exit' ]

        let  = 'RGFH'

        let fun1 = gene => {
            
        }
        let gene = {
            init : 'A',
            acid : 'RGFH',
            exit : '0'
        }
        let gene = acid => {
            
        }
    </script>
     -->
</body>
</html>