<!doctype html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- app quickseed 2020.10.2 voyage -->

    <!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ HEAD CONTENT -->


    <title>VH Screen</title>
    <meta name="description" content="">
    <meta name="author"      content="zl">


    <!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ BOOT SERVICE -->


    <!-- style boot zl 2020 -->
    <style>

        /* box model */
        html { margin:0; padding:0;     height:100%; }
        body { margin:0; padding:0; min-height:100%; }
        *,*:before,*:after { box-sizing: border-box; }

        /* media markup */
        img, svg, canvas, picture, figure, figcaption {
            display:   block;
            max-width: 100%;
            margin:    0;
            padding:   0;
            border:    0; }

        /* design & UX */
        html { cursor:default; scroll-behavior:smooth; }
        body { overflow-y:scroll; }
        input, button, label, select, textarea, summary,
        a, [tabindex] { touch-action:manipulation; }

        @media screen and (prefers-reduced-motion:reduce) {
            /* do less animations */ }

    </style>


    <!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ GOOGLE FONTS -->


    <link rel="preconnect"   href="//fonts.gstatic.com" crossorigin>
    <noscript>
        <link
            media="all"
            href="https://fonts.googleapis.com/css?family=Vollkorn:400,400i,700&subset=cyrillic"
            rel="stylesheet">
    </noscript>

        <link
            media="none" onload="if(media!='all')media='all'"
            href="https://fonts.googleapis.com/css?family=Vollkorn:400,400i,700&subset=cyrillic"
            rel="stylesheet">

    <style>
        body {
          --font-family: Vollkorn, Georgia, serif;
            font-family: var(--font-family);
        }

        /* Font rendering 2019 */
        html { -ms-text-size-adjust:     100%;
               -webkit-text-size-adjust: 100%; }
        body {  text-rendering: optimizeLegibility;
               -webkit-font-smoothing: antialiased; }

    </style>


    <!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ DESIGN -->

    <!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ CUSTOM -->

    <!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ʕ⊙ᴥ⊙ʔ -->
    <!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ HEAD END -->

</head>
<body>

<!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ Event Launcher -->

<script class="jsEventLauncher">
    function GoodEventLauncher (DNA) {

    //  Description
    //  Event listener combined with animation frame
    //  2020.10.2

        const {event}   = DNA // Event name
        const {on}      = DNA // Event target
        const {f}       = DNA // Function to launch
        const {prepare} = DNA // Function to launch out of frame
        const {capture} = DNA // Event API option
        const {once}    = DNA // Event API option
        const {passive} = DNA // Event API option
        const options = { capture, once, passive }

    //  Web API 2020

        const RAF = window.requestAnimationFrame
                 || window.webkitRequestAnimationFrame
                 || window.mozRequestAnimationFrame
                 || function (o) {o()} ;

    //  Workflow

        const Worker = (!!on && on.addEventListener && on) || window
        const Listen = o => Worker.addEventListener( event, Notice, options )
        const StopIt = o => Worker.removeEventListener( event, Notice, options )
        const Notice = e => DoWork( !!prepare && prepare(e) )

        let   Vacant = true // debouncing pattern
        const DoWork = o => { !!Vacant && RAF(Launch) ; Vacant = false }
        const Launch = o => { !!f      && f()         ; Vacant = true  }

    //  API

        let API = {
            play: Listen,
            stop: StopIt,
        }

    //  Run

        API.play()
        return API

    }
</script>

<!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ TEST EXAMPLE -->

<section hidden>

    <blockquote>

        <button class="stop">Stop it</button>
        <script >let butOf = document.querySelector('.stop')</script>

        <button class="start">Restart (only once)</button>
        <script >let butOn = document.querySelector('.start')</script>

    </blockquote>

    <script>

        let f = o => console.log('Launch f')
        let Tester = GoodEventLauncher({ event:'resize', f })
        GoodEventLauncher({ event:'click', on:butOf, f:Tester.stop  })
        GoodEventLauncher({ event:'click', on:butOn, f:Tester.play, once:true })

    </script>

</section>

<!-- ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ BODY END -->

</body>
</html>
