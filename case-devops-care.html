<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- ========================================= HEAD CONTENT -->


    <title>Devops Care — AWS Infrastructure Consultants</title>


    <!-- ========================================= BOOT -->


    <!-- ༼°▽°༽ style boot -->
    <style>
        body    { height: auto; }
        img,svg { max-width: 100%; }
    </style>

    <!-- ༼°▽°༽ prefetch boot -->
    <link rel="preconnect"   href="//fonts.gstatic.com">
    <!-- INFO: https://3perf.com/blog/link-rels/ -->


    <!-- ========================================= DESIGN -->


    <link
        href="app/styles/appart.css"
        rel="stylesheet" type="text/css">
    <link
        href="cases/devops-care.css"
        rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Vollkorn:400,400i,700&subset=cyrillic"
        rel="stylesheet">


    <!-- ========================================== ʕ⊙ᴥ⊙ʔ = -->
    <!-- ========================================= END HEAD -->
</head>
<body class="page-design page-layout">

    <main class="journal-grid join-layers centrale">

        <header class="chapter">
            <h1 class="page-title">
                <dfn>Devops Care</dfn>
                AWS Infrastructure Consultants
            </h1>
        </header>

        <section class="chapter keep-base intro-section">
            <div class="box">
                <p>
                    Welcome to Devops Care, an IT Consulting Firm that helps Software Development companies rapidly implement <b>complete CI/CD solution</b> and go to <b>production in confidence</b>. Our expert professionals will partner with your business to deliver <b>tailor-made practical solutions</b>, fast. We delivered numerous projects — and we’re confident we’re the right <b>IT Consulting</b> Firm for you.
                </p>
            </div>
            <div class="box side">
                <ul class="links top-level-menu">
                    <li><a href="/cadmium3"><span>Cadmium3</span></a></li>
                    <li><a href="/kubernetes-cluster"><span>Kubernetes Cluster</span></a></li>
                </ul>
            </div>
            <footer class="keep-wide footer">
                <div class="box">
                    <section class="top-level-contacts">
                        <h2 class="h3 caption">Contacts</h2>
                        <ul class="links">
                            <li><a href="mailto:pavels.veretennikovs@devops.care">pavels.veretennikovs@devops.care</a></li>
                            <li><a href="tel:0037129501119">+371-29501119</a></li>
                        </ul>
                    </section>
                </div>
                <div class="side contact-button-area">
                    <button class="swed-button js-for-EastsideBar"><span>Send message</span></button>
                </div>
            </footer>
        </section>

        <section class="chapter keep-grid services">

            <header class="wide">
                <h2 class="h1">Services</h2>
            </header>

            <section class="keep-base chapter back-color-descent">
                <div class="box">
                    <h3>AWS Consulting and Automation</h3>
                    <p class="h4">Terraform, CloudFormation, Ansible</p>
                    <p>With years of experience, our staff has the capabilities and expertise to take your business to the next level. At Devops Care, we combine our insights and skills to transform your processes and strategies, and in turn, your company. We’re proud to help shape and improve how our clients structure and manage their business.</p>
                </div>
                <figure class="side">
                    <img src="cases/img/AWS-Consulting-and-Automation--preview.webp" alt="">
                </figure>
                <footer class="keep-base footer">
                    <div class="wide contact-button-area">
                        <button class="swed-button js-for-EastsideBar"><span>Get in Touch</span></button>
                    </div>
                </footer>
            </section>

            <section class="keep-base chapter back-color-descent">
                <div class="box">
                    <h3>Turnkey Environment for Development</h3>
                    <p class="h4">EKS/Kubernetes, Jenkins, ELK, Sentry</p>
                    <p>Give your developers the best set of tools in the market. Attract new talents with cutting edge technology. Don't waste time inventing things from scratch.</p>
                </div>
                <figure class="side">
                    <img src="cases/img/Turnkey-Environment-for-Development--preview.webp" alt="">
                </figure>
                <footer class="keep-base footer">
                    <div class="wide">
                        <p><a href="/cadmium3" class="h4">Learn more</a></p>
                    </div>
                </footer>
            </section>

            <section class="keep-base chapter back-color-descent partnership">
                <header class="box wide text-color-accent">
                    <h2 class="h1">Technological Partnership</h2>
                </header>
                <section class="wide join-layers">

                    <p class="h5 text-color-accent">In English</p>
                    <h4>«Offer Description & Brief Technology Overview»</h4>
                    <ul class="links inline">
                        <li>
                            <a href="https://0d6456ff-9bc3-499b-89b1-dc58665e4b5e.filesusr.com/ugd/4787f9_7a2cb13acc2d4e498da72911e035c1df.pdf">Read PDF</a>
                        </li>
                        <li>
                            <a download="Devops.Care--Technological.Partnership--En" href="https://0d6456ff-9bc3-499b-89b1-dc58665e4b5e.filesusr.com/ugd/4787f9_7a2cb13acc2d4e498da72911e035c1df.pdf">Download</a>
                        </li>
                    </ul>

                </section>
                <section class="wide join-layers">

                    <p class="h5 text-color-accent">In Russian</p>
                    <h4>«Описание предложения и краткий обзор технологий»</h4>
                    <ul class="links inline">
                        <li>
                            <a href="https://0d6456ff-9bc3-499b-89b1-dc58665e4b5e.filesusr.com/ugd/4787f9_157832595dd54f718b79b1d95eb09e29.pdf">Read PDF</a>
                        </li>
                        <li>
                            <a download="Devops.Care--Technological.Partnership--Ru" href="https://0d6456ff-9bc3-499b-89b1-dc58665e4b5e.filesusr.com/ugd/4787f9_157832595dd54f718b79b1d95eb09e29.pdf">Download</a>
                        </li>
                    </ul>

                </section>
            </section>

        </section>

    </main>

    <footer class="chapter journal-grid join-layers centrale page-footer">

        <section class="chapter layer keep-grid demo-area">
            <section class="box">
                <h2 class="h1">Arrange a Demo</h2>
                <div class="h3">
                    <p>Contact us to arrange a short demo, either personally or via <a href="http://zoom.us/">Zoom</a>.</p>
                </div>
            </section>
            <div class="side contact-button-area">
                <button class="swed-button js-for-EastsideBar"><span>Arrange a Demo</span></button>
            </div>
        </section>

        <section class="box about">
           <h2 class="h1">Devops.Care</h2>
           <p class="h4">Discover they ways how we can expedite your success</p>
            <ul class="links inline top-level-menu">
                <li><a href="/"><span>Home</span></a></li>
                <li><a href="/cadmium3"><span>Cadmium3</span></a></li>
                <li><a href="/kubernetes-cluster"><span>Kubernetes Cluster</span></a></li>
            </ul>
            <p>©2019 by Devops Care. Proudly created with Wix.com</p>
        </section>

        <section class="chapter layer keep-grid contacts">
            <div class="box">
                <section class="top-level-contacts">
                    <h2 class="h3 caption">Contacts</h2>
                    <ul class="links">
                        <li><a href="mailto:pavels.veretennikovs@devops.care">pavels.veretennikovs@devops.care</a></li>
                        <li><a href="tel:0037129501119">+371-29501119</a></li>
                    </ul>
                </section>
            </div>
            <div class="side contact-button-area">
                <button class="swed-button js-for-EastsideBar"><span>Send message</span></button>
            </div>
        </section>
    </footer>

    <main class="journal-grid join-layers centrale">

        <header class="chapter">
            <div class="h1 page-title">
                <dfn>Devops Care</dfn>
                AWS Infrastructure Consultants
            </div>
        </header>

        <nav class="wide">
            <ul class="links inline">
                <li><a href="/"><span>Home</span></a> →</li>
                <li><a href="/cadmium3"><span>Cadmium3</span></a></li>
            </ul>
        </nav>

        <section class="layer keep-grid product-title">
            <h1>Cadmium3</h1>
            <div class="h4 wide">
                <p>A well-thought solution for AWS-based software development</p>
            </div>
        </section>

        <section class="chapter wide h4">
            <p>Cadmium3 is set of Terraform scripts, Helm charts and Jenkinsfile examples that together create and manage organization's AWS infrastructure. Current feature set is geared towards providing multiple fully functional development environments with GitOps CI/CD in Kubernetes inside separate AWS accounts. Reasonable effort was put into separating the code into modules, but the final intent was to make it work like a complete turn-key package.</p>
        </section>

        <section class="chapter base back-color-descent">

            <h2 class="h1">Enterprise-level scope</h2>
            <ul class="box">
                <li>
                    <p>AWS Account is automatically created and connected to AWS Organization</p>
                </li>
                <li>
                    <p>Organization Role is created inside AWS Account for sudo-like AssumeRole access</p>
                </li>
                <li>
                    <p>Access to AWS account is centrally managed via <a href="https://aws.amazon.com/single-sign-on/" target="_blank" data-content="https://aws.amazon.com/single-sign-on/" data-type="external" rel="undefined">AWS SSO</a> based on Active Directory group membership eliminating need to create, administer and cleanup IAM users inside individual AWS Accounts.</p>
                </li>
                <li>
                    <p>Organization Sysadmin SSH key is provisioned into AWS Account</p>
                </li>
                <li>
                    <p>IP address range is centrally-managed allowing overlap-free AWS Account peering</p>
                </li>
                <li>
                    <p>AWS Accounts are linked spoke-to-hub manner to <a href="https://aws.amazon.com/transit-gateway/" target="_blank" data-content="https://aws.amazon.com/transit-gateway/" data-type="external" rel="undefined">AWS Transit Gateway</a> providing truly hybrid cloud experience</p>
                </li>
                <li>
                    <p>Infrastructure VPC is connected to AWS Transit Gateway providing ActiveDirectory connections for LDAP(s) authentication and easy integration for other AD-dependent services (like AD-based MS SQL Server logins or Windows EC2 instances)</p>
                </li>
                <li>
                    <p>Office branches are connected to AWS Transit Gateway via <a href="https://aws.amazon.com/vpn/" target="_blank" data-content="https://aws.amazon.com/vpn/" data-type="external" rel="undefined">IPSEC (AWS Site-to-Site VPN)</a> extending your network space to developer's machines. The can directly access services running in cloud without the need of tunneling, proxies, NAT or client VPN</p>
                </li>
                <li>
                    <p>For the road/couch warriors <a href="https://docs.aws.amazon.com/vpn/latest/clientvpn-admin/what-is.html" target="_blank" data-content="https://docs.aws.amazon.com/vpn/latest/clientvpn-admin/what-is.html" data-type="external" rel="undefined">AWS Client VPN</a> (powered by OpenVPN) with built-in Active Directory authentication offers similar direct access to organization network</p>
                </li>
            </ul>

        </section>
        <section class="chapter base">

           <h2 class="h1">AWS Account scope</h2>
           <p class="h5">By AWS Account we mean on of the organization's aws accounts connected to AWS Organization and devoted single software product development (or set of connected products).</p>
            <ul class="box">
                <li>DNS sub-zone is created for AWS Account ready to be connected with TLD NS provider</li>
                <li>GitHub repos are created and managed for each product along with respective teams and CI tool access</li>
                <li>AWS ECR repos are created and managed for each product</li>
                <li>S3 buckets are created for Nexus, Chartmuseum and generic use. Solves problem of Nexus running out of disk space for next 5 exabytes.</li>
                <li>Centrally managed IP whitelist locks down account from unauthorized access on multiple levels - IAM SourceIP, AWS SecurityGroups, nginx allow/deny.</li>
                <li>Set of organization-wide settings and secrets are maintained inside AWS Account to be discovered in a predictable manner and used by local services like Jenkins and Keycloak</li>
                <li>Per AWS Account - GitHub repo, S3 bucket and DynamoDB for Terraform configuration of the individual account features</li>
            </ul>

        </section>
        <section class="chapter base back-color-descent">

            <h2 class="h1">Kubernetes cluster</h2>
            <p class="h5">The cluster is a used as development environment and certain corners are cut in order to make it simple and usable. We assume that:</p>
            <ul class="box">
                <li>cluster users can tolerate minor downtimes. Spot Instances could be externally terminated, approximately once a month</li>
                <li>information and deployment doesn't need to be backed up. In case of a total disaster everything can be rebuilt from git repos which are presumed durable enough due to distributed nature of git</li>
                <li>authentication is enough. We don't offer fine grained authorization for the most services and role separation is more of guardrails and policies</li>
                <li>firewalls limit external access, but anyone on the office network can reach cluster internals</li>
            </ul>
            <footer class="wide">
                <div class="h3">
                    <a href="/kubernetes-cluster">What ships inside the cluster?</a>
                </div>
            </footer>
        </section>

        <hr>

    </main>

    <footer class="chapter journal-grid join-layers centrale page-footer">

        <section class="chapter layer keep-grid demo-area">
            <section class="box">
                <h2 class="h1">Arrange a Demo</h2>
                <div class="h3">
                    <p>Contact us to arrange a short demo, either personally or via <a href="http://zoom.us/">Zoom</a>.</p>
                </div>
            </section>
            <div class="side contact-button-area">
                <button class="swed-button js-for-EastsideBar"><span>Arrange a Demo</span></button>
            </div>
        </section>

        <section class="box about">
           <h2 class="h1">Devops.Care</h2>
           <p class="h4">Discover they ways how we can expedite your success</p>
            <ul class="links inline top-level-menu">
                <li><a href="/"><span>Home</span></a></li>
                <li><a href="/cadmium3"><span>Cadmium3</span></a></li>
                <li><a href="/kubernetes-cluster"><span>Kubernetes Cluster</span></a></li>
            </ul>
            <p>©2019 by Devops Care. Proudly created with Wix.com</p>
        </section>

        <section class="chapter layer keep-grid contacts">
            <div class="box">
                <section class="top-level-contacts">
                    <h2 class="h3 caption">Contacts</h2>
                    <ul class="links">
                        <li><a href="mailto:pavels.veretennikovs@devops.care">pavels.veretennikovs@devops.care</a></li>
                        <li><a href="tel:0037129501119">+371-29501119</a></li>
                    </ul>
                </section>
            </div>
            <div class="side contact-button-area">
                <button class="swed-button js-for-EastsideBar"><span>Send message</span></button>
            </div>
        </section>
    </footer>

    <main class="journal-grid join-layers centrale">

        <header class="chapter">
            <div class="h1 page-title">
                <dfn>Devops Care</dfn>
                AWS Infrastructure Consultants
            </div>
        </header>

        <nav class="wide">
            <ul class="links inline">
                <li><a href="/"><span>Home</span></a> →</li>
                <li><a href="/kubernetes-cluster"><span>Kubernetes Cluster</span></a>
            </ul>
        </nav>

        <section class="layer keep-grid product-title">
            <h1>Kubernetes Cluster</h1>
            <div class="h4 wide">
                <p>Features that you get out of the box</p>
            </div>
        </section>

        <section class="chapter base">
            <header class="wide">
                <h2 class="h1">Features</h2>
            </header>
            <ul class="box">
                <li>
                    <p>VPC, bastion host (rarely needed due to TGW), organization-wide netwokr routes and set of security groups for every cluster</p>
                </li>
                <li>
                    <p>based on <a href="https://aws.amazon.com/eks/" target="_blank" data-content="https://aws.amazon.com/eks/" data-type="external" rel="undefined">AWS EKS</a>, providing HA, managed masters/etcds, simple upgrades and IAM integration</p>
                </li>
                <li>
                    <p>docker/kubelet is tuned to allow wide range of applications (like ELK requiring ulimit=65536)</p>
                </li>
                <li>
                    <p>worker nodes are created as <a href="https://aws.amazon.com/ec2/spot/" target="_blank" data-content="https://aws.amazon.com/ec2/spot/" data-type="external" rel="undefined">EC2 spot instances</a> reducing EC2 costs up to 90% at the expense of the rare situation of node being killed due to high spot instance demand. This situation happens approximately once in a month and is handled automatically by Kubernetes machinery causing minor disturbance</p>
                </li>
                <li>
                    <p>worker nodes live inside two AWS Availability Zones. This reduces a chance that cluster runs out of spot instance capacity, but induces Regional Data Transfer costs ($ 0.01/GB at the time of writing). If you application is doing heavy data hauling, it might be useful to use <a href="https://kubernetes.io/docs/reference/kubernetes-api/labels-annotations-taints/#failure-domainbetakubernetesiozone" target="_blank" data-content="https://kubernetes.io/docs/reference/kubernetes-api/labels-annotations-taints/#failure-domainbetakubernetesiozone" data-type="external" rel="undefined">AZ affinity</a></p>
                </li>
                <li>
                    <p><a href="https://github.com/helm/charts/tree/master/stable/cluster-autoscaler" target="_blank" data-content="https://github.com/helm/charts/tree/master/stable/cluster-autoscaler" data-type="external" rel="undefined">cluster-autoscaler</a> dynamically allocates and removes new worker nodes when capacity is requested. It also takes care of pod reallocation when spot instances get terminated due to high demand. <a href="https://github.com/helm/charts/tree/master/stable/cluster-overprovisioner" target="_blank" data-content="https://github.com/helm/charts/tree/master/stable/cluster-overprovisioner" data-type="external" rel="undefined">overprovisioner</a> makes sure there is always a spare capacity available eliminating node provisioning delay.</p>
                </li>
                <li>
                    <p>Thanks to <a href="https://docs.aws.amazon.com/eks/latest/userguide/pod-networking.html" target="_blank" data-content="https://docs.aws.amazon.com/eks/latest/userguide/pod-networking.html" data-type="external" rel="undefined">Amazon VPC CNI plugin</a> Kubernetes pods have the same IP address inside the pod as they do on the VPC network. It allows developers to directly interact with Kubernetes pods (or even better - Kubernetes <a href="https://kubernetes.io/docs/concepts/services-networking/service/#headless-services" target="_blank" data-content="https://kubernetes.io/docs/concepts/services-networking/service/#headless-services" data-type="external" rel="undefined">headless services</a>) even if they do they own service discovery and advertisement like <a href="https://github.com/helm/charts/blob/master/incubator/kafka/README.md#installing-the-chart" target="_blank" data-content="https://github.com/helm/charts/blob/master/incubator/kafka/README.md#installing-the-chart" data-type="external" rel="undefined">Kafka</a> does.</p>
                </li>
                <li>
                    <p>Kubernetes pod logs are collected with filebeat, stored in <a href="https://aws.amazon.com/elasticsearch-service/" target="_blank" data-content="https://aws.amazon.com/elasticsearch-service/" data-type="external" rel="undefined">AWS ElasticSearch</a> and accessible via Kubernetes-hosted Kibana. <a href="https://github.com/helm/charts/tree/master/stable/elasticsearch-curator" target="_blank" data-content="https://github.com/helm/charts/tree/master/stable/elasticsearch-curator" data-type="external" rel="undefined">es-curator</a> wipes logs after 7 days.</p>
                </li>
                <li>
                    <p>Kubernetes Services can be automatically exposed via Kibernetes Ingresses with the help of <a href="https://github.com/jenkins-x/exposecontroller" target="_blank" data-content="https://github.com/jenkins-x/exposecontroller" data-type="external" rel="undefined">jx/exposecontroller</a>. It manages FQDN host names and TLS annotations so you don't need to hardcode them in each deployment.</p>
                </li>
                <li>
                    <p>HTTP and potentially tcp/udp ingresses are exposed externally via <a href="https://github.com/helm/charts/tree/master/stable/nginx-ingress" target="_blank" data-content="https://github.com/helm/charts/tree/master/stable/nginx-ingress" data-type="external" rel="undefined">nginx-ingress</a> using single AWS ELB.</p>
                </li>
                <li>
                    <p>By default each ingress is exposed as HTTPS with a help of <a href="https://github.com/helm/charts/tree/master/stable/cert-manager" target="_blank" data-content="https://github.com/helm/charts/tree/master/stable/cert-manager" data-type="external" rel="undefined">letsencrypt/cert-manager</a>. Permanent services like Jenkins/Nexus receive production certificates, dynamic ones like feature branch preview deploys get staging certificate due to request quota.</p>
                </li>
            </ul>
        </section>

        <section class="chapter base">
            <header class="wide">
                <h2 class="h1">Bundled software</h2>
            </header>
            <ul class="box">
                <li>
                    <p>Jenkins, configured to use Kubernetes pods as build agents. CI secrets are pre-created and accessible as Kubernetes secrets</p>
                </li>
                <li>
                    <p>Nexus with S3 plugin (at the time of writing repos needs to be manually configured to use it)</p>
                </li>
                <li>
                    <p><a href="https://chartmuseum.com/" target="_blank" data-content="https://chartmuseum.com/" data-type="external" rel="undefined">ChartMuseum</a> / Monocular to store and browse released helm charts</p>
                </li>
                <li>
                    <p>Kubernetes Dashboard in full-access mode</p>
                </li>
                <li>
                    <p>Prometheus Operator with MetricsServer, Prometheus and Grafana for collecting and displaying both cluster and application metrics</p>
                </li>
                <li>
                    <p><a href="https://www.keycloak.org/" target="_blank" data-content="https://www.keycloak.org/" data-type="external" rel="undefined">KeyCloak</a> for providing centralized authentication bridge between OpenID/SAML enabled services and LDAP/OneLogin/Okta identity providers. Comes pre-configured to use organization's Active Directory. Can be easily extended to allow custom users (i.e. external client/collaborator logins) or social login</p>
                </li>
                <li>
                    <p><a href="https://github.com/pusher/oauth2_proxy" target="_blank" data-content="https://github.com/pusher/oauth2_proxy" data-type="external" rel="undefined">oauth2-proxy</a> that can be used as <a href="https://kubernetes.github.io/ingress-nginx/examples/auth/oauth-external-auth/" target="_blank" data-content="https://kubernetes.github.io/ingress-nginx/examples/auth/oauth-external-auth/" data-type="external" rel="undefined">nginx authentication url</a> for services that don't support authentication natively. It's enabled merely adding couple of annotations to the Ingress saving hours of developer's time</p>
                </li>
                <li>
                    <p>(Coming Soon) Sentry</p>
                </li>
            </ul>
        </section>

    </main>

    <footer class="chapter journal-grid join-layers centrale page-footer">

        <section class="chapter layer keep-grid demo-area">
            <section class="box">
                <h2 class="h1">Arrange a Demo</h2>
                <div class="h3">
                    <p>Contact us to arrange a short demo, either personally or via <a href="http://zoom.us/">Zoom</a>.</p>
                </div>
            </section>
            <div class="side contact-button-area">
                <button class="swed-button js-for-EastsideBar"><span>Arrange a Demo</span></button>
            </div>
        </section>

        <section class="box about">
           <h2 class="h1">Devops.Care</h2>
           <p class="h4">Discover they ways how we can expedite your success</p>
            <ul class="links inline top-level-menu">
                <li><a href="/"><span>Home</span></a></li>
                <li><a href="/cadmium3"><span>Cadmium3</span></a></li>
                <li><a href="/kubernetes-cluster"><span>Kubernetes Cluster</span></a></li>
            </ul>
            <p>©2019 by Devops Care. Proudly created with Wix.com</p>
        </section>

        <section class="chapter layer keep-grid contacts">
            <div class="box">
                <section class="top-level-contacts">
                    <h2 class="h3 caption">Contacts</h2>
                    <ul class="links">
                        <li><a href="mailto:pavels.veretennikovs@devops.care">pavels.veretennikovs@devops.care</a></li>
                        <li><a href="tel:0037129501119">+371-29501119</a></li>
                    </ul>
                </section>
            </div>
            <div class="side contact-button-area">
                <button class="swed-button js-for-EastsideBar"><span>Send message</span></button>
            </div>
        </section>
    </footer>

    <side class="offsidebar from-eastside EastsideBar">
        <div class="sidepanel">

            <header class="sidepanel-header">
                <h2>Eastside Bar</h2>
            </header>

            <nav class="sidepanel-content">
                <ul>
                    <li>Lorem ipsum</li>
                    <li>Pellentesque habitant</li>
                    <li>Morbi tristique senectus</li>
                    <li>Et netus et malesuada</li>
                    <li>Fames ac turpis egestas</li>
                    <li>Vestibulum tortor quam</li>
                    <li>Feugiat vitae</li>
                    <li>Ultricies eget</li>
                    <li>Tempor sit amet</li>
                </ul>
            </nav>

            <footer class="sidepanel-footer">
                <p>Footer</p>
            </footer>

        </div>
    </side>


    <!-- ========================================= PAGE CUSTOM -->


    <!-- Offsidebar JS -->
    <script>
     /** Offside Bar open/close functions
      *  2019.9.11
      */
        function InterfaceOffsideBar (barName) {

            const asidebar = document.querySelector('.'+barName)
            const htmlwrap = document.querySelector('html')

            const classActive     = 'is-active'
            const classHasOverlay = 'has-offsidebar-overlay'
            const classOverlay    = 'offsidebar-overlay'
            const classBackground = 'offsidebar-background'

            const cssBartender    = '.js-for-' + barName

            const doClose  = () => {
                asidebar.classList.remove(classActive)
                htmlwrap.classList.remove(classHasOverlay) }
            const doOpen   = () => {
                asidebar.classList.add(classActive)
                htmlwrap.classList.add(classHasOverlay) }
            const doToggle = () => {
                if (asidebar.classList.contains(classActive)) doClose()
                else doOpen()
            }

         // find and activate bartenders

            const bartenderFunction = (el, order) =>
                  el.addEventListener('click', order === 'close' ? doClose : doToggle )
            document.querySelectorAll(cssBartender).forEach(bartenderFunction)

         // find/create background

            let background = asidebar.querySelector('.'+classBackground)
            if(!background) {
                background = document.createElement('div')
                background.classList.add(classBackground)
                asidebar.prepend(background)
            }

         // find/create shadow overlay

            let overlay = asidebar.querySelector('.'+classOverlay)
            if(!overlay) {
                overlay = document.createElement('div')
                overlay.classList.add(classOverlay)
                asidebar.prepend(overlay)
            }
            bartenderFunction(overlay, 'close')
        }
        document.addEventListener('DOMContentLoaded', f=>InterfaceOffsideBar('EastsideBar'))
    </script>


</body>
</html>
